<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">My Tickets</h5>

    <!-- כפתור פנייה חדשה -->
    <a class="btn btn-sm btn-primary" routerLink="/tickets/new" aria-label="Create new ticket">
      + New Ticket
    </a>
  </div>

  <div class="card-body p-0">

    @if (tickets().length === 0) {
    <p class="text-muted m-3">No tickets found.</p>
    } @else {

    <ul class="list-group list-group-flush" role="list">

      @for (ticket of tickets(); track ticket.ticketId) {
      <li class="list-group-item d-flex justify-content-between align-items-start" role="listitem">
        <div>
          <strong>{{ ticket.subject }}</strong>
          <p class="mb-1">{{ ticket.description }}</p>

          <span class="badge" [class.bg-success]="ticket.isClosed" [class.bg-warning]="!ticket.isClosed">
            {{ ticket.isClosed ? 'Closed' : 'Open' }}
          </span>
        </div>

        @if (!ticket.isClosed) {
        <button class="btn btn-sm btn-outline-secondary" (click)="closeTicket(ticket.ticketId)"
          aria-label="Close ticket">
          Close
        </button>
        }
      </li>
      }

    </ul>
    }

  </div>
</div>